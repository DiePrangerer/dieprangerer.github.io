<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <link rel="preload" as="image" href="assets/rechts.gif">
    <link rel="preload" as="image" href="assets/links.gif">


    <title>Die Prangerer</title>
    <meta property="og:url" content="https://dieprangerer.github.io/" />
    <meta property="og:image" content="https://dieprangerer.github.io/assets/still.gif" />
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="de_DE" />
</head>

<body>
    <div id="page-container">
        <div id="content-wrap">
            <center>
                <div class="mainimagewrapper">
                    <img class="mainimage" src="assets/still.gif" />
                    <audio id="player"></audio>
                    <div class="loader"></div>
                </div>
                <div class="slidecontainer">
                    <h1 class="lowvolume">ðŸ”ˆ</h1>
                    <input type="range" min="1" max="100" value="50" class="slider" id="slider">
                    <h1 class="highvolume">ðŸ”Š</h1>
                </div>
                <h1 class="suggestions">Themen VorschlÃ¤ge? <br> <a href="mailto:dieprangerer@gmx.de">
                        dieprangerer@gmx.de</a></h1>
            </center>
        </div>
        <footer id="footer">
            <center>
                <a class="footertext" href="datenschutzerklÃ¤rung.html">Datenschutz<a />
                    <a class="footertext" href="impressum.html"> Impressum</a>
            </center>
        </footer>
    </div>
</body>
<script>
    $(document).ready(function () {

        var eckiUrls = ["r4kparq4y26922s/Ecki1.mp3?dl=0",
            "ajufz82lexsuxwe/Ecki2.mp3?dl=0",
            "39pygmpmg05fj2g/Ecki3.mp3?dl=0",
            "znoqkwanmc9rsh9/Ecki4.mp3?dl=0",
            "x040zm2912yg48k/Ecki5.mp3?dl=0"
        ];
        var siggiUrls = ["x6s441h3fy6fl7d/Siggi1.mp3?dl=0",
            "h5ts4eyotgbfu6d/Siggi2.mp3?dl=0",
            "j2n4d7nsm2gu9vi/Siggi3.mp3?dl=0",
            "z9c8pl4o967lxt3/Siggi4.mp3?dl=0",
            "uw1orqxj1m0uywe/Siggi5.mp3?dl=0"
        ]
        var urls = [];
        var numUrls = 10;
        for (let i = 0; i < eckiUrls.length; i++) {
            urls.push("https://dl.dropboxusercontent.com/s/" + eckiUrls[i],
                "https://dl.dropboxusercontent.com/s/" + siggiUrls[i]);
        }
        var loaded = 0;

        function loadedAudio(event) {
            loaded++;
            if (event.path[0].duration < 1.5) {
                urls = urls.filter(e => e !== event.path[0].src)
            }

            if (loaded == numUrls) {
                $(".loader").hide();
                init();
            }
        }

        function preloadsounds() {
            for (var i in urls) {
                var audio = new Audio();
                audio.addEventListener('canplaythrough', loadedAudio, false); 
                audio.src = urls[i];
                audio.load();
            }
        }
        preloadsounds();
        setTimeout(function () {
            if (loaded == 0) {
                $(".loader").hide();
                init();
            }
        }, 2000)

 


    function play(index) {
        player.src = urls[index];
        player.play();
    }

    function init() {
        $("img").on("click", function (event) {
            var player = $('#player')[0];
            var i = 0;
            player.addEventListener('ended', function () {
                i++;
                if (i % 2 == 0) {
                    $("img").attr("src", "assets/links.gif");
                } else {
                    $("img").attr("src", "assets/rechts.gif");

                }

                if (i >= urls.length) {
                    $("img").attr("src", "assets/still.gif");
                    return;
                }
                play(i);
            }, false);

            $("img").attr("src", "assets/links.gif");
            play(i);
        });
    }

    $("#slider").on("input", function (event) {

        $("#player")[0].volume = (this.value / 100);

    });
    });
</script>

</html>